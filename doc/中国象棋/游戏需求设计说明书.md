### 《实时中国象棋：能量战争》游戏需求设计说明书 (GDD) - V0.1

#### 1. 游戏概述 (Game Overview)

- **游戏名称：** 实时象棋：能量战争 (暂定)
    
- **游戏类型：** 实时策略对战 (Real-Time Strategy, RTS)
    
- **平台：** PC (Steam)
    
- **核心理念：** 将中国象棋的经典规则与现代RTS游戏的实时微操、资源管理和信息战相结合，创造一种全新的、快节奏的1v1竞技体验。
    

#### 2. 核心玩法 (Core Gameplay)

玩家双方在一个标准的中国象棋棋盘上进行实时对战。玩家不再轮流走棋，而是通过消耗随时间增长的“能量”来实时指挥己方棋子移动、攻击和闪避。游戏的目标是在复杂的战场环境中，通过精妙的操作和战术决策，率先击杀对方的“将”或“帅”。

#### 3. 核心机制详述 (Core Mechanics)

- **能量上限：** 每位玩家拥有4格能量上限。
    
- **能量恢复：** 能量从0开始，每秒自动恢复1格，直到满4格为止。
    
- **能量消耗：** 玩家每次指挥一个棋子行动（开始移动），消耗1格能量。
    
- **战略意义：** 能量是游戏的核心资源，限制了玩家的“每分钟操作数”(APM)。玩家必须在“爆发操作”和“积攒能量”之间做出权衡，创造进攻或防守的窗口期。
    

- **移动方式：** 棋子从A点到B点的移动是**连续的、匀速的**过程，而非瞬时。所有棋子拥有统一的基础移动速度。
    
- **攻击判定：**
    
    - **移动即攻击：** 对于“车、兵、将”等直线移动棋子，其移动路径本身就是攻击判定区。在移动过程中，一旦其碰撞体积与敌方棋子碰撞，即触发攻击。
        
    - **相遇即兑子：** 默认情况下，当两个处于移动状态的棋子相遇，双方棋子同时从棋盘上移除（同归于尽）。
        
    - **静止被吃：** 移动中的棋子遇到静止的敌方棋子，则静止棋子被移除。
        
- **后摇机制：** 任何棋子在完成一次移动并到达目的地后，会进入一个短暂的、无法行动的“后摇”状态（例如0.5秒），之后才能接受新的指令。
    

- **马 (Knight)：**
    
    - 移动方式：走“日”字。其移动过程表现为一个短暂的、小幅度的弧线跳跃动画，并非直线平移。
        
    - 攻击判定：只有在**落地瞬间**，对落点位置的敌方棋子产生攻击判定。跳跃过程中是无敌的，不会与路径上的棋子发生碰撞。
        
- **象 (Elephant)：**
    
    - 移动方式：走“田”字。与“马”类似，表现为跳跃，仅对落点产生攻击判定。存在“别象腿”的规则，如果“田”字中心有棋子，则无法移动。
        
- **炮 (Cannon)：**
    
    - 移动方式：移动时与“车”相同，是直线平移。
        
    - 攻击方式：攻击时必须隔着一个棋子（“炮架”），其攻击方式表现为**瞬时传送**到目标棋子位置并完成击杀，然后自身也从棋盘移除。这是一个高风险高回报的特殊技能，消耗可能更高（待定）。
        
- **士 (Advisor) & 将/帅 (General):** 只能在九宫格内移动，规则同上。
    

- **视野规则：** 游戏开始后，整个棋盘被战争迷雾覆盖。
    
    - **基础视野：** 每个棋子拥有自身周围一格的视野范围。
        
    - **特殊视野：**
        
        - **车/炮：** 在其所在的横向和纵向直线上，拥有无限远的视野，直到被其他棋子阻挡。
            
        - **马/象/士：** 仅拥有其可攻击落点的视野。
            
- **战略意义：** 引入信息不对称，强调“侦察”和“埋伏”的战术价值。
    

- **主要胜负：** 任意一方的“将”或“帅”被击杀，游戏结束。
    
- **平局（待定）：** 若一定时间内（如10分钟）未分胜负，可根据剩余棋子价值或其它规则判定胜负或平局。
    

#### 4. 技术实现要点 (Technical Implementation)

- **网络架构：**
    
    - 采用P2P直连模式，通过 **Steamworks Networking API** 实现连接建立和NAT穿透。
        
    - 必须采用**权威主机（Authoritative Host）**模式。一名玩家作为主机（Host/Server），另一名作为客户端（Client）。
        
- **同步逻辑：**
    
    - **客户端 (Client)：** 负责接收玩家输入（如“移动‘马’到X,Y点”），并将这个**“操作意图”**发送给主机。同时，接收主机广播的游戏状态，并将其平滑地渲染出来。
        
    - **主机 (Host)：**
        
        1. 是唯一拥有“游戏世界真相”的单位。
            
        2. 接收客户端的“操作意图”。
            
        3. 验证该操作是否合法（能量是否足够？棋子是否在后摇？）。
            
        4. 如果合法，就在自己的游戏世界里执行这个操作（例如，设置“马”的目标点和开始移动的时间戳）。
            
        5. 主机以固定的频率（如30次/秒）向客户端广播**所有活动棋子的关键状态**（棋子ID, 当前精确位置, 移动速度, 目标位置等）。
            
        6. 所有碰撞检测、伤害计算、棋子移除等逻辑**仅在主机上运算**。运算结果会通过状态广播同步给客户端。
            
- **数据结构（示例）：**
    
    - 网络间传输的棋子状态包 (PieceState) 可能包含：
        
        - byte pieceId;
            
        - Vector2 currentPosition;
            
        - Vector2 targetPosition;
            
        - enum State { Idle, Moving, Cooldown };
            

#### 5. 用户体验 (User Experience)

- **游戏大厅：** 利用 **Steam Lobbies API**，玩家可以创建公开或私密的房间，也可以搜索并加入其他玩家创建的房间。
    
- **好友对战：** 玩家可以通过 **Steam 好友列表**直接邀请好友加入对战。
    
- **排行榜：** 利用 **Steam Leaderboards API**，设立天梯积分（ELO）排行榜，激励玩家进行竞技。
    

---

**总结：**

这份文档清晰地定义了你的游戏。它是一个创新、有趣且技术上可行的项目。只要你从一开始就采用正确的网络同步策略（权威主机），后续的开发就会顺利很多。你的下一步，就是用Unity等引擎搭建一个最简单的原型，实现两个方块在主机权威下，能够响应客户端输入并进行移动和碰撞。