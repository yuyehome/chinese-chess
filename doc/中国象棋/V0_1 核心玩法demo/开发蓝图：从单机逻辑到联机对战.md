
---
### **开发蓝图：从单机逻辑到联机对战**

我们将分三个主要阶段完成Demo的核心功能：

#### **阶段 1: 完善单机游戏逻辑 (我们当前所处阶段)**

- **目标:** 实现一个功能完整的、可以在一台电脑上玩的中国象棋游戏（暂时忽略实时和行动点）。
    
- **任务 1.1: 完整实现RuleEngine**
    
    - 为马、象、士、将、炮、兵添加移动规则生成逻辑。
        
- **任务 1.2: 实现棋子移动**
    
    - 当玩家点击一个合法的高亮落点时，棋子在数据层(BoardState)和视觉层(场景中的GameObject)上都移动到新位置。
        
- **任务 1.3: 实现吃子逻辑**
    
    - 当棋子移动到一个有敌方棋子的位置时，敌方棋子被移除。
        
- **任务 1.4: 完善游戏流程**
    
    - 实现简单的轮流走棋（红方走完，黑方走）。
        
    - 实现将军和将死的判断。
        

#### **阶段 2.5: 增加主菜单选择**
 - 游戏主菜单界面，暂时都是用于调试的，包括以下简单按钮入口：
	 - 调试开发入口（正在开发的玩法内容）
	 - 传统回合制象棋（单人操作）
	 - 传统回合制象棋（挑战电脑）
	 - 传统回合制象棋（联机对战）
	 - 实时对战象棋（单人操作）
	 - 实时对战象棋（挑战电脑）
	 - 实时对战象棋（联机对战）
	


#### **阶段 2: 引入实时行动点系统**

- **目标:** 打破回合制，引入GDD中的核心机制。
    
- **任务 2.1: 实现行动点系统**
    
    - 创建EnergySystem，随时间恢复行动点。
        
    - 玩家移动棋子时消耗行动点。
        
    - UI上显示行动点进度条。
        
- **任务 2.2: 移除轮流走棋限制**
    
    - 允许双方玩家在有行动点的情况下随时操作自己的棋子。
        

#### **阶段 3: 集成Fish-Net网络**

- **目标:** 将单机游戏改造成你设计的“房主权威”网络对战模式。
    
- **任务 3.1: 搭建网络基础**
    
    - 创建NetworkManager，设置简单的UI来“创建房间”（作为房主/Host）和“加入房间”（作为客户端/Client）。
        
    - 将棋子Prefab网络化，添加NetworkObject组件。
        
- **任务 3.2: 同步游戏状态**
    
    - 将BoardState的权威实例放在房主端。
        
    - 使用[ServerRpc]将客户端的操作请求（如“我想把(x1,y1)的棋子移动到(x2,y2)”）发送给房主。
        
    - 房主验证操作合法性后，更新权威BoardState。
        
    - 使用SyncVar或[ObserversRpc]将BoardState的变化同步给所有客户端。
        
- **任务 3.3: 客户端播放**
    
    - 客户端的BoardRenderer不再直接响应本地操作，而是监听来自服务器的状态更新，并据此渲染棋盘。